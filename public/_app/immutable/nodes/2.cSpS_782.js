import{g as xe,l as Ae,r as Ee,a as V,i as D,t as Y,b as R}from"../chunks/disclose-version.BzNTGips.js";import{i as ve}from"../chunks/legacy.BURKhhzq.js";import{ad as ze,E as Ne,I as M,N as J,J as Ce,D as fe,ae as ue,L as Te,M as ae,O as B,P,af as $,F as de,G as me,H as Me,A as se,ag as re,ah as Le,ai as Ie,aj as Oe,ak as Se,al as De,am as Re,an as He,a8 as je,ao as W,ap as K,a4 as Fe,w as ie,aq as _e,ar as Pe,as as Ve,at as Ye,au as $e,av as qe,C as ne,aw as Je,ax as Be,a7 as Ge,p as pe,c as C,e as E,d as z,t as q,j as m,y as A,b as he,ay as H,az as Ue,aA as We}from"../chunks/utils.DY47F48y.js";import{p as oe,o as Ke,i as ge}from"../chunks/index-client.DJ3jTUUs.js";function Xe(t,e){return e}function Qe(t,e,a,r){for(var s=[],c=e.length,v=0;v<c;v++)Le(e[v].e,s,!0);var g=c>0&&s.length===0&&a!==null;if(g){var k=a.parentNode;Ie(k),k.append(a),r.clear(),I(t,e[0].prev,e[c-1].next)}Oe(s,()=>{for(var _=0;_<c;_++){var d=e[_];g||(r.delete(d.k),I(t,d.prev,d.next)),Se(d.e,!g)}})}function be(t,e,a,r,s,c=null){var v=t,g={flags:e,items:new Map,first:null},k=(e&_e)!==0;if(k){var _=t;v=M?J(De(_)):_.appendChild(ze())}M&&Ce();var d=null,N=!1;Ne(()=>{var i=a(),n=fe(i)?i:i==null?[]:ue(i),o=n.length;if(N&&o===0)return;N=o===0;let b=!1;if(M){var y=v.data===Te;y!==(o===0)&&(v=ae(),J(v),B(!1),b=!0)}if(M){for(var w=null,x,p=0;p<o;p++){if(P.nodeType===8&&P.data===Re){v=P,b=!0,B(!1);break}var l=n[p],f=r(l,p);x=ye(P,g,w,null,l,f,p,s,e),g.items.set(f,x),w=x}o>0&&J(ae())}if(!M){var S=He;Ze(n,g,v,s,e,(S.f&$)!==0,r)}c!==null&&(o===0?d?de(d):d=me(()=>c(v)):d!==null&&Me(d,()=>{d=null})),b&&B(!0),a()}),M&&(v=P)}function Ze(t,e,a,r,s,c,v){var X,Q,Z,ee;var g=(s&Pe)!==0,k=(s&(W|K))!==0,_=t.length,d=e.items,N=e.first,i=N,n,o=null,b,y=[],w=[],x,p,l,f;if(g)for(f=0;f<_;f+=1)x=t[f],p=v(x,f),l=d.get(p),l!==void 0&&((X=l.a)==null||X.measure(),(b??(b=new Set)).add(l));for(f=0;f<_;f+=1){if(x=t[f],p=v(x,f),l=d.get(p),l===void 0){var S=i?i.e.nodes_start:a;o=ye(S,e,o,o===null?e.first:o.next,x,p,f,r,s),d.set(p,o),y=[],w=[],i=o.next;continue}if(k&&et(l,x,f,s),l.e.f&$&&(de(l.e),g&&((Q=l.a)==null||Q.unfix(),(b??(b=new Set)).delete(l))),l!==i){if(n!==void 0&&n.has(l)){if(y.length<w.length){var j=w[0],u;o=j.prev;var h=y[0],L=y[y.length-1];for(u=0;u<y.length;u+=1)le(y[u],j,a);for(u=0;u<w.length;u+=1)n.delete(w[u]);I(e,h.prev,L.next),I(e,o,h),I(e,L,j),i=j,o=L,f-=1,y=[],w=[]}else n.delete(l),le(l,i,a),I(e,l.prev,l.next),I(e,l,o===null?e.first:o.next),I(e,o,l),o=l;continue}for(y=[],w=[];i!==null&&i.k!==p;)(c||!(i.e.f&$))&&(n??(n=new Set)).add(i),w.push(i),i=i.next;if(i===null)continue;l=i}y.push(l),o=l,i=l.next}if(i!==null||n!==void 0){for(var T=n===void 0?[]:ue(n);i!==null;)(c||!(i.e.f&$))&&T.push(i),i=i.next;var F=T.length;if(F>0){var ke=s&_e&&_===0?a:null;if(g){for(f=0;f<F;f+=1)(Z=T[f].a)==null||Z.measure();for(f=0;f<F;f+=1)(ee=T[f].a)==null||ee.fix()}Qe(e,T,ke,d)}}g&&je(()=>{var te;if(b!==void 0)for(l of b)(te=l.a)==null||te.apply()}),se.first=e.first&&e.first.e,se.last=o&&o.e}function et(t,e,a,r){r&W&&re(t.v,e),r&K?re(t.i,a):t.i=a}function ye(t,e,a,r,s,c,v,g,k){var _=(k&W)!==0,d=(k&Ve)===0,N=_?d?Fe(s):ie(s):s,i=k&K?ie(v):v,n={i,v:N,k:c,a:null,e:null,prev:a,next:r};try{return n.e=me(()=>g(t,N,i),M),n.e.prev=a&&a.e,n.e.next=r&&r.e,a===null?e.first=n:(a.next=n,a.e.next=n.e),r!==null&&(r.prev=n,r.e.prev=n.e),n}finally{}}function le(t,e,a){for(var r=t.next?t.next.e.nodes_start:a,s=e?e.e.nodes_start:a,c=t.e.nodes_start;c!==r;){var v=Ye(c);s.before(c),c=v}}function I(t,e,a){e===null?t.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function tt(t){if(M){var e=!1,a=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var r=t.value;O(t,"value",null),t.value=r}if(t.hasAttribute("checked")){var s=t.checked;O(t,"checked",null),t.checked=s}}};t.__on_r=a,$e(a),xe()}}function O(t,e,a,r){var s=t.__attributes??(t.__attributes={});M&&(s[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||s[e]!==(s[e]=a)&&(e==="style"&&"__styles"in t&&(t.__styles={}),e==="loading"&&(t[qe]=a),a==null?t.removeAttribute(e):typeof a!="string"&&at(t).includes(e)?t[e]=a:t.setAttribute(e,a))}var ce=new Map;function at(t){var e=ce.get(t.nodeName);if(e)return e;ce.set(t.nodeName,e=[]);for(var a,r=ne(t),s=Element.prototype;s!==r;){a=Je(r);for(var c in a)a[c].set&&e.push(c);r=ne(r)}return e}function we(t,e,a=e){var r=Be();Ae(t,"input",()=>{var s=G(t)?U(t.value):t.value;a(s),r&&s!==(s=e())&&(t.value=s??"")}),Ge(()=>{var s=e();if(M&&t.defaultValue!==t.value){a(G(t)?U(t.value):t.value);return}G(t)&&s===U(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function G(t){var e=t.type;return e==="number"||e==="range"}function U(t){return t===""?null:+t}function st(t){return function(...e){var a=e[0];return a.stopPropagation(),t==null?void 0:t.apply(this,e)}}function rt(t,e){var c;var a=(c=t.$$events)==null?void 0:c[e.type],r=fe(a)?a.slice():a==null?[]:[a];for(var s of r)s.call(this,e)}var it=Y('<p class="error-message svelte-94zt8p"> </p>'),nt=Y('<div class="comment svelte-94zt8p"> </div>'),ot=Y('<class class="modal-backdrop svelte-94zt8p"><div class="modal-content svelte-94zt8p"><button class="close-button svelte-94zt8p">Ã—</button> <h2 class="movie-title svelte-94zt8p"> </h2> <img class="movie-image svelte-94zt8p"> <p class="movie-rating svelte-94zt8p"> </p> <a target="_blank" class="movie-link svelte-94zt8p">View on IMDb</a> <section class="discussion svelte-94zt8p"><h3>Discussion</h3> <textarea placeholder="Write your comment here..." class="comment-input svelte-94zt8p"></textarea> <button class="comment-button svelte-94zt8p">Post Comment</button> <!> <div class="comments svelte-94zt8p"></div></section></div></class>');function lt(t,e){pe(e,!1);let a=oe(e,"movie",8),r=oe(e,"onClose",8),s=H(""),c=H([]),v=H("");const g=async()=>{try{const h=await(await fetch(`http://movie-ratings.infinityfreeapp.com/api/get.php?movie_title=${a().title}`)).json();if(Array.isArray(h))A(c,h.map(L=>({text:L.comment})));else throw new Error("Failed to fetch comments")}catch(u){console.error(u),A(v,"Failed to load comments.")}},k=async()=>{if(m(s).trim()===""){A(v,"Comment cannot be empty.");return}A(v,"");try{const h=await(await fetch("http://movie-ratings.infinityfreeapp.com/api/post.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({movie_title:a().title,comment:m(s)})})).json();h.success?(A(c,[...m(c),{text:m(s)}]),A(s,""),g()):A(v,h.error||"Something went wrong.")}catch(u){u instanceof Error?A(v,"Failed to post comment: "+u.message):A(v,"Failed to post comment: An unknown error occurred")}};Ke(()=>{g()}),ve();var _=ot(),d=C(_),N=C(d),i=E(N,2),n=C(i,!0);z(i);var o=E(i,2),b=E(o,2),y=C(b);z(b);var w=E(b,2),x=E(w,2),p=E(C(x),2);Ee(p);var l=E(p,2),f=E(l,2);ge(f,()=>m(v),u=>{var h=it(),L=C(h,!0);z(h),q(()=>R(L,m(v))),V(u,h)});var S=E(f,2);be(S,7,()=>m(c),u=>u.text,(u,h,L)=>{var T=nt(),F=C(T,!0);z(T),q(()=>{O(T,"key",m(L)),R(F,m(h).text)}),V(u,T)}),z(S),z(x),z(d),z(_),q(()=>{R(n,a().title),O(o,"src",a().image),O(o,"alt",a().title),R(y,`Rating: ${a().rating??""}`),O(w,"href",a().imdbLink)}),D("click",N,function(...u){var h;(h=r())==null||h.apply(this,u)}),we(p,()=>m(s),u=>A(s,u)),D("click",l,k),D("click",d,st(function(u){rt.call(this,e,u)})),D("click",_,function(...u){var h;(h=r())==null||h.apply(this,u)}),V(t,_),he()}var ct=Y('<button class="movie-card svelte-ul2zsd"><img class="svelte-ul2zsd"> <h3 class="svelte-ul2zsd"> </h3> <p class="svelte-ul2zsd"> </p></button>'),vt=Y('<main><section class="movies-section svelte-ul2zsd"><h1 class="svelte-ul2zsd">RECOMMENDATION FOR YOU</h1> <input type="text" placeholder="Search movies..." class="search-bar svelte-ul2zsd"> <div class="movie-grid svelte-ul2zsd"></div></section> <!></main>');function ft(t,e){pe(e,!1);const a=H();let r=H(""),s=[{title:"John Wick (2014)",rating:"8.4",image:"assets/images/johnwick.jpg",imdbLink:"https://www.imdb.com/title/tt2911666/"},{title:"Transformer One",rating:"9.0",image:"assets/images/Transformers_One_Official_Poster.jpg",imdbLink:"https://www.imdb.com/title/tt8864596/"},{title:"Nobody",rating:"8.5",image:"assets/images/nobody.jpg",imdbLink:"https://www.imdb.com/title/tt7888964/"},{title:"Nobody",rating:"8.5",image:"assets/images/nobody.jpg",imdbLink:"https://www.imdb.com/title/tt7888964/"},{title:"Nobody",rating:"8.5",image:"assets/images/nobody.jpg",imdbLink:"https://www.imdb.com/title/tt7888964/"},{title:"Nobody",rating:"8.5",image:"assets/images/nobody.jpg",imdbLink:"https://www.imdb.com/title/tt7888964/"},{title:"Nobody",rating:"8.5",image:"assets/images/nobody.jpg",imdbLink:"https://www.imdb.com/title/tt7888964/"}],c=H(null);const v=n=>{A(c,n)},g=()=>{A(c,null)};Ue(()=>m(r),()=>{A(a,s.filter(n=>n.title.toLowerCase().includes(m(r).toLowerCase())))}),We(),ve();var k=vt(),_=C(k),d=E(C(_),2);tt(d);var N=E(d,2);be(N,5,()=>m(a),Xe,(n,o)=>{var b=ct(),y=C(b),w=E(y,2),x=C(w,!0);z(w);var p=E(w,2),l=C(p,!0);z(p),z(b),q(()=>{O(y,"src",m(o).image),O(y,"alt",m(o).title),R(x,m(o).title),R(l,m(o).rating)}),D("click",b,()=>v(m(o))),D("keydown",b,f=>f.key==="Enter"&&v(m(o))),V(n,b)}),z(N),z(_);var i=E(_,2);ge(i,()=>m(c),n=>{lt(n,{get movie(){return m(c)},onClose:g})}),z(k),we(d,()=>m(r),n=>A(r,n)),V(t,k),he()}function pt(t){ft(t,{})}export{pt as component};
