import{g as xe,l as Ae,r as Ee,a as P,i as O,t as V,b as D}from"../chunks/disclose-version.BzNTGips.js";import{i as ve}from"../chunks/legacy.BURKhhzq.js";import{ad as ze,E as Ce,I as M,N as J,J as Ne,D as fe,ae as ue,L as Te,M as ae,O as B,P as F,af as Y,F as de,G as me,H as Me,A as se,ag as re,ah as Le,ai as Ie,aj as Oe,ak as Se,al as Re,am as De,an as He,a8 as je,ao as W,ap as K,a4 as Fe,w as ie,aq as _e,ar as Pe,as as Ve,at as Ye,au as $e,av as qe,C as ne,aw as Je,ax as Be,a7 as Ge,p as pe,c as N,e as E,d as z,t as $,j as p,y as A,b as he,ay as H,az as Ue,aA as We}from"../chunks/utils.DY47F48y.js";import{p as oe,o as Ke,i as ge}from"../chunks/index-client.DJ3jTUUs.js";function Xe(t,e){return e}function Qe(t,e,a,r){for(var s=[],c=e.length,v=0;v<c;v++)Le(e[v].e,s,!0);var g=c>0&&s.length===0&&a!==null;if(g){var k=a.parentNode;Ie(k),k.append(a),r.clear(),L(t,e[0].prev,e[c-1].next)}Oe(s,()=>{for(var _=0;_<c;_++){var d=e[_];g||(r.delete(d.k),L(t,d.prev,d.next)),Se(d.e,!g)}})}function be(t,e,a,r,s,c=null){var v=t,g={flags:e,items:new Map,first:null},k=(e&_e)!==0;if(k){var _=t;v=M?J(Re(_)):_.appendChild(ze())}M&&Ne();var d=null,C=!1;Ce(()=>{var i=a(),n=fe(i)?i:i==null?[]:ue(i),o=n.length;if(C&&o===0)return;C=o===0;let b=!1;if(M){var w=v.data===Te;w!==(o===0)&&(v=ae(),J(v),B(!1),b=!0)}if(M){for(var y=null,x,h=0;h<o;h++){if(F.nodeType===8&&F.data===De){v=F,b=!0,B(!1);break}var l=n[h],u=r(l,h);x=we(F,g,y,null,l,u,h,s,e),g.items.set(u,x),y=x}o>0&&J(ae())}if(!M){var R=He;Ze(n,g,v,s,e,(R.f&Y)!==0,r)}c!==null&&(o===0?d?de(d):d=me(()=>c(v)):d!==null&&Me(d,()=>{d=null})),b&&B(!0),a()}),M&&(v=F)}function Ze(t,e,a,r,s,c,v){var X,Q,Z,ee;var g=(s&Pe)!==0,k=(s&(W|K))!==0,_=t.length,d=e.items,C=e.first,i=C,n,o=null,b,w=[],y=[],x,h,l,u;if(g)for(u=0;u<_;u+=1)x=t[u],h=v(x,u),l=d.get(h),l!==void 0&&((X=l.a)==null||X.measure(),(b??(b=new Set)).add(l));for(u=0;u<_;u+=1){if(x=t[u],h=v(x,u),l=d.get(h),l===void 0){var R=i?i.e.nodes_start:a;o=we(R,e,o,o===null?e.first:o.next,x,h,u,r,s),d.set(h,o),w=[],y=[],i=o.next;continue}if(k&&et(l,x,u,s),l.e.f&Y&&(de(l.e),g&&((Q=l.a)==null||Q.unfix(),(b??(b=new Set)).delete(l))),l!==i){if(n!==void 0&&n.has(l)){if(w.length<y.length){var j=y[0],f;o=j.prev;var m=w[0],T=w[w.length-1];for(f=0;f<w.length;f+=1)le(w[f],j,a);for(f=0;f<y.length;f+=1)n.delete(y[f]);L(e,m.prev,T.next),L(e,o,m),L(e,T,j),i=j,o=T,u-=1,w=[],y=[]}else n.delete(l),le(l,i,a),L(e,l.prev,l.next),L(e,l,o===null?e.first:o.next),L(e,o,l),o=l;continue}for(w=[],y=[];i!==null&&i.k!==h;)(c||!(i.e.f&Y))&&(n??(n=new Set)).add(i),y.push(i),i=i.next;if(i===null)continue;l=i}w.push(l),o=l,i=l.next}if(i!==null||n!==void 0){for(var I=n===void 0?[]:ue(n);i!==null;)(c||!(i.e.f&Y))&&I.push(i),i=i.next;var q=I.length;if(q>0){var ke=s&_e&&_===0?a:null;if(g){for(u=0;u<q;u+=1)(Z=I[u].a)==null||Z.measure();for(u=0;u<q;u+=1)(ee=I[u].a)==null||ee.fix()}Qe(e,I,ke,d)}}g&&je(()=>{var te;if(b!==void 0)for(l of b)(te=l.a)==null||te.apply()}),se.first=e.first&&e.first.e,se.last=o&&o.e}function et(t,e,a,r){r&W&&re(t.v,e),r&K?re(t.i,a):t.i=a}function we(t,e,a,r,s,c,v,g,k){var _=(k&W)!==0,d=(k&Ve)===0,C=_?d?Fe(s):ie(s):s,i=k&K?ie(v):v,n={i,v:C,k:c,a:null,e:null,prev:a,next:r};try{return n.e=me(()=>g(t,C,i),M),n.e.prev=a&&a.e,n.e.next=r&&r.e,a===null?e.first=n:(a.next=n,a.e.next=n.e),r!==null&&(r.prev=n,r.e.prev=n.e),n}finally{}}function le(t,e,a){for(var r=t.next?t.next.e.nodes_start:a,s=e?e.e.nodes_start:a,c=t.e.nodes_start;c!==r;){var v=Ye(c);s.before(c),c=v}}function L(t,e,a){e===null?t.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function tt(t){if(M){var e=!1,a=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var r=t.value;S(t,"value",null),t.value=r}if(t.hasAttribute("checked")){var s=t.checked;S(t,"checked",null),t.checked=s}}};t.__on_r=a,$e(a),xe()}}function S(t,e,a,r){var s=t.__attributes??(t.__attributes={});M&&(s[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||s[e]!==(s[e]=a)&&(e==="style"&&"__styles"in t&&(t.__styles={}),e==="loading"&&(t[qe]=a),a==null?t.removeAttribute(e):typeof a!="string"&&at(t).includes(e)?t[e]=a:t.setAttribute(e,a))}var ce=new Map;function at(t){var e=ce.get(t.nodeName);if(e)return e;ce.set(t.nodeName,e=[]);for(var a,r=ne(t),s=Element.prototype;s!==r;){a=Je(r);for(var c in a)a[c].set&&e.push(c);r=ne(r)}return e}function ye(t,e,a=e){var r=Be();Ae(t,"input",()=>{var s=G(t)?U(t.value):t.value;a(s),r&&s!==(s=e())&&(t.value=s??"")}),Ge(()=>{var s=e();if(M&&t.defaultValue!==t.value){a(G(t)?U(t.value):t.value);return}G(t)&&s===U(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function G(t){var e=t.type;return e==="number"||e==="range"}function U(t){return t===""?null:+t}function st(t){return function(...e){var a=e[0];return a.stopPropagation(),t==null?void 0:t.apply(this,e)}}function rt(t,e){var c;var a=(c=t.$$events)==null?void 0:c[e.type],r=fe(a)?a.slice():a==null?[]:[a];for(var s of r)s.call(this,e)}var it=V('<p class="error-message svelte-94zt8p"> </p>'),nt=V('<div class="comment svelte-94zt8p"> </div>'),ot=V('<class class="modal-backdrop svelte-94zt8p" role="dialog" tabindex="0"><div class="modal-content svelte-94zt8p" role="document"><button class="close-button svelte-94zt8p">Ã—</button> <h2 class="movie-title svelte-94zt8p"> </h2> <img class="movie-image svelte-94zt8p"> <p class="movie-rating svelte-94zt8p"> </p> <a target="_blank" rel="noopener noreferrer" class="movie-link svelte-94zt8p">View on IMDb</a> <section class="discussion svelte-94zt8p"><h3>Discussion</h3> <textarea placeholder="Write your comment here..." class="comment-input svelte-94zt8p"></textarea> <button class="comment-button svelte-94zt8p">Post Comment</button> <!> <div class="comments svelte-94zt8p"></div></section></div></class>');function lt(t,e){pe(e,!1);let a=oe(e,"movie",8),r=oe(e,"onClose",8),s=H(""),c=H([]),v=H("");const g=async()=>{try{const m=await(await fetch(`http://localhost:8080/api/get.php?movie_title=${a().title}`)).json();if(Array.isArray(m))A(c,m.map(T=>({text:T.comment})));else throw new Error("Failed to fetch comments")}catch(f){console.error(f),A(v,"Failed to load comments.")}},k=async()=>{if(p(s).trim()===""){A(v,"Comment cannot be empty.");return}A(v,"");try{const m=await(await fetch("http://localhost:8080/api/post.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({movie_title:a().title,comment:p(s)})})).json();m.success?(A(c,[...p(c),{text:p(s)}]),A(s,""),g()):A(v,m.error||"Something went wrong.")}catch(f){f instanceof Error?A(v,"Failed to post comment: "+f.message):A(v,"Failed to post comment: An unknown error occurred")}};Ke(()=>{g()}),ve();var _=ot(),d=N(_),C=N(d),i=E(C,2),n=N(i,!0);z(i);var o=E(i,2),b=E(o,2),w=N(b);z(b);var y=E(b,2),x=E(y,2),h=E(N(x),2);Ee(h);var l=E(h,2),u=E(l,2);ge(u,()=>p(v),f=>{var m=it(),T=N(m,!0);z(m),$(()=>D(T,p(v))),P(f,m)});var R=E(u,2);be(R,7,()=>p(c),f=>f.text,(f,m)=>{var T=nt(),I=N(T,!0);z(T),$(()=>D(I,p(m).text)),P(f,T)}),z(R),z(x),z(d),z(_),$(()=>{D(n,a().title),S(o,"src",a().image),S(o,"alt",a().title),D(w,`Rating: ${a().rating??""}`),S(y,"href",a().imdbLink)}),O("click",C,function(...f){var m;(m=r())==null||m.apply(this,f)}),ye(h,()=>p(s),f=>A(s,f)),O("click",l,k),O("click",d,st(function(f){rt.call(this,e,f)})),O("click",_,function(...f){var m;(m=r())==null||m.apply(this,f)}),O("keydown",_,function(...f){var m;(m=r())==null||m.apply(this,f)}),P(t,_),he()}var ct=V('<button class="movie-card svelte-ul2zsd"><img class="svelte-ul2zsd"> <h3 class="svelte-ul2zsd"> </h3> <p class="svelte-ul2zsd"> </p></button>'),vt=V('<main><section class="movies-section svelte-ul2zsd"><h1 class="svelte-ul2zsd">SMR RECCOMENDATION FOR YOU</h1> <input type="text" placeholder="Search movies..." class="search-bar svelte-ul2zsd"> <div class="movie-grid svelte-ul2zsd"></div></section> <!></main>');function ft(t,e){pe(e,!1);const a=H();let r=H(""),s=[{title:"John Wick (2014)",rating:"8.4",image:"assets/images/johnwick.jpg",imdbLink:"https://www.imdb.com/title/tt2911666/"},{title:"Transformer One",rating:"9.0",image:"assets/images/Transformers_One_Official_Poster.jpg",imdbLink:"https://www.imdb.com/title/tt8864596/"},{title:"Nobody",rating:"8.5",image:"assets/images/nobody.jpg",imdbLink:"https://www.imdb.com/title/tt7888964/"},{title:"Nobody",rating:"8.5",image:"assets/images/nobody.jpg",imdbLink:"https://www.imdb.com/title/tt7888964/"},{title:"Nobody",rating:"8.5",image:"assets/images/nobody.jpg",imdbLink:"https://www.imdb.com/title/tt7888964/"},{title:"Nobody",rating:"8.5",image:"assets/images/nobody.jpg",imdbLink:"https://www.imdb.com/title/tt7888964/"},{title:"Nobody",rating:"8.5",image:"assets/images/nobody.jpg",imdbLink:"https://www.imdb.com/title/tt7888964/"}],c=H(null);const v=n=>{A(c,n)},g=()=>{A(c,null)};Ue(()=>p(r),()=>{A(a,s.filter(n=>n.title.toLowerCase().includes(p(r).toLowerCase())))}),We(),ve();var k=vt(),_=N(k),d=E(N(_),2);tt(d);var C=E(d,2);be(C,5,()=>p(a),Xe,(n,o)=>{var b=ct(),w=N(b),y=E(w,2),x=N(y,!0);z(y);var h=E(y,2),l=N(h,!0);z(h),z(b),$(()=>{S(w,"src",p(o).image),S(w,"alt",p(o).title),D(x,p(o).title),D(l,p(o).rating)}),O("click",b,()=>v(p(o))),O("keydown",b,u=>u.key==="Enter"&&v(p(o))),P(n,b)}),z(C),z(_);var i=E(_,2);ge(i,()=>p(c),n=>{lt(n,{get movie(){return p(c)},onClose:g})}),z(k),ye(d,()=>p(r),n=>A(r,n)),P(t,k),he()}function pt(t){ft(t,{})}export{pt as component};
